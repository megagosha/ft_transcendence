#  api methods
## user
Логин для юзера. Дописать с учетом апи интранета и google АУФА<br>
**/user/login**<br>
отвечает либо окей с каким-нибудь ключем с которым потом методы остальные вызываются<br>
, либо код ошибки. Дописать ошибки

**/user/register**<br>
описание: регистрация пользователя в системе<br>

ответ -ok (session id?, user_id) -уже зареган, юзернейм уже используется, валидация пароля<br>

**/user/setnickname**<br>
параметры:
- user_id
- new_name

описание: имя должно быть уникальным.<br>
авторизация: да<br>
ответ: ок или нет имя не уникально

**/user/searchUsers**<br>
параметры:
- name

описание: имя должно быть уникальным.<br>
авторизация: нет<br>
ответ: список юзеров, чье имя содержит параметр<br>
{[user_id => id, user_name => name, avatar_thumbnail => path_to_thumb, status => [online, offline, ingame]}<br>

**/user/setAvatar**<br>
параметры:
- user_id
- img

авторизация: да<br>
проверяет изображение на соответсвие каким то параметрам. Например, размер до 2мб и разрешение меньше 1000пикс по каждой стороне.<br>
ответ: ок или не ок<br>

**/user/set2auth**<br>
параметры:
- user_id
- on/off

описание: включает или выключает двухфакторку. <br>
авторизация: да<br>
ответ: почитать, дописать

**/user/addFriend**;<br>

параметры:
- user_id
- friend_id


  описание: добавить друга <br>
  авторизация: да<br>
  ответ: ок, нет юзера, нет авторизации.

**/user/getFriendList**;<br>
параметры:
- user_id

описание: возвращае список друзей <br>
авторизация: да<br>
ответ: список друзей с аватарками
{[0 => [user_id, thumbnail, username, message_text, timestamp], 1 => ... }

описание: добавляет пользователя к списку друзей<br>
авторизация: да<br>
ответ: пользователь добавлен / уже в списке / пользователь не найден<br>

**/user/getDuelHistroy**<br>
параметры:
- user_id
- user_id 

описание: возвращает историю матчей между двумя юзерами<br>
авторизация: да<br>
ответ: {match_id, time => timestamp, opponent_name => name, score => score}

**/user/getAbsoluteHistory**<br>
параметры:
- offset

описание: показывает отсортированный список всех игроков в общем зачете. <br>
авторизация: да<br>
ответ: {match_id, name1 => name, absolutescore => score}

**/user/getUserHistory**
параметры:
- user_id

авторизация: да <br>
описание: возвращает историю всех матчей юзера <br>
ответ: {match_id, opponent_name, type, score, time)<br>

**/user/getUserProfile**
параметры:
- user_id

авторизация: да <br>
описание: возвращает описание профиля юзера <br>
ответ: {user_id, thumbnail, timestamp, info, username, timezone?)<br>

## чат
**/chat/createChat**
параметры:
- user_id
- chat_type (direct, public, private)
- password if private
- user_id if direct
- chatName (optional for direct)

авторизация: да <br>
описание: возвращает окей и чат айди, если чат создан. 403 если уже существует. или ошибку авторизации.<br>
ответ: {match_id, opponent_name, type, score, time)<br>

**/chat/sendMessage**
параметры:
- chat_id
- message (text)
- message type ? 

авторизация: да <br>
описание: отправляет сообщение в канал или директ
ответ: ок или ошибку(не авторизован, заблокирован у пользователя, не существует юзерайди, тип сообщения не поддерживается, сообщение слишком длинное) . <br>

**/chat/setBlockUser**
параметры:
- user_id
- bool on/off

авторизация: да <br>
описание: заблокировать юзера
ответ: ок или ошибку(не авторизован, уже заблочен, не существует юзерайди) . <br>

**/chat/setChannelPassword**
параметры:
- chat_id
- password

авторизация: да <br>
описание: снять или установить пароль. Нельзя установить для приватного чата. 
ответ: ок или ошибку(не авторизован, уже заблочен, нет прав, не существует чат, приватный чат) . <br>

**/chat/tranferOwnership**

параметры:
- юзер, которому передаются права

авторизация: да <br>
описание: передать права владельца канала. У приватного чата нельзя сменить владельца. 
ответ: ок или ошибку(не авторизован, нет прав, не существует чат, не существует юзера, приватный чат). <br>

**/chat/leaveChannel**

параметры:
- chat_id

авторизация: да <br>
описание: покинуть канал. Если юзер владелец канала, канал удаляется для всех юзеров. Данные удаляются.
ответ: ок, нет прав, нет канала, не авторизован  <br>


**/chat/promoteAdmin**

параметры:
- chat_id
- user_id

авторизация: да <br>
описание: дать права админу. 
ответ: ок, нет прав, нет канала, не авторизован <br>

**/chat/muteUser**

параметры:
- chat_id
- user_id

авторизация: да <br>
описание: замьютить юзера
ответ: ок, нет прав, нет канала, не авторизован<br>

**/chat/muteUser**

параметры:
- chat_id
- user_id
- on/off
- time

авторизация: да <br>
описание: замьютить юзера на какое то время
ответ: ок, нет прав, нет канала, не авторизован, время на которое заблочить. 0 - бесконечно<br>

**/chat/getChatMessages**

параметры
- chat_id
- user_id
- timestamp
- offset

авторизация: да <br>
описание: получить список сообщений
ответ: ок, нет прав, нет канала, не авторизован, нет сообщений. 
{[0 => [user_id, thumbnail, username, message_text, timestamp], 1 => ... }

## game
**/game/createNewgame**

параметры:
- user_id
- game_type //0 random 1 duel
- timestamp

авторизация: да <br>
описание: получить список сообщений
ответ: ок, нет прав, нет канала, не авторизован, нет сообщений.
{[0 => [user_id, thumbnail, username, message_text, timestamp], 1 => ... }