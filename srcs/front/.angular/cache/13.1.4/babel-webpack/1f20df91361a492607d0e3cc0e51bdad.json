{"ast":null,"code":"import { FormControl } from \"@angular/forms\";\nimport { ChatType } from \"../../services/chat.service\";\nimport { ErrorUtil } from \"../../util/ErrorUtil\";\nimport { HttpErrorResponse } from \"@angular/common/http\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"../../services/chat.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/radio\";\nimport * as i9 from \"@angular/material/button\";\nimport * as i10 from \"@angular/material/icon\";\n\nfunction ChatCreateNewComponent_mat_error_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.getNameError());\n  }\n}\n\nfunction ChatCreateNewComponent_mat_error_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.getDescriptionError());\n  }\n}\n\nfunction ChatCreateNewComponent_ul_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 19);\n    i0.ɵɵelementStart(1, \"li\");\n    i0.ɵɵtext(2, \"Everyone can find\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"li\");\n    i0.ɵɵtext(4, \"Everyone can join\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"li\");\n    i0.ɵɵtext(6, \"Everyone can be added by OWNER or ADMIN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ChatCreateNewComponent_ul_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 19);\n    i0.ɵɵelementStart(1, \"li\");\n    i0.ɵɵtext(2, \"Everyone can find\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"li\");\n    i0.ɵɵtext(4, \"Everyone who knows password can join\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"li\");\n    i0.ɵɵtext(6, \"Everyone can be added by ADMIN or OWNER\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ChatCreateNewComponent_ul_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 19);\n    i0.ɵɵelementStart(1, \"li\");\n    i0.ɵɵtext(2, \"Nobody can find\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"li\");\n    i0.ɵɵtext(4, \"Nobody can join\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"li\");\n    i0.ɵɵtext(6, \"Everyone can be added by ADMIN or OWNER\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ChatCreateNewComponent_div_28_mat_error_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r6.getPasswordError());\n  }\n}\n\nfunction ChatCreateNewComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelementStart(1, \"mat-form-field\", 3);\n    i0.ɵɵelementStart(2, \"mat-label\");\n    i0.ɵɵtext(3, \"Enter password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 21);\n    i0.ɵɵelementStart(5, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ChatCreateNewComponent_div_28_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.hide = !ctx_r7.hide;\n    });\n    i0.ɵɵelementStart(6, \"mat-icon\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, ChatCreateNewComponent_div_28_mat_error_8_Template, 2, 1, \"mat-error\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"type\", ctx_r5.hide ? \"password\" : \"text\")(\"formControl\", ctx_r5.password)(\"required\", ctx_r5.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", \"Hide password\")(\"aria-pressed\", ctx_r5.hide);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r5.hide ? \"visibility_off\" : \"visibility\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.password.hasError(\"validation\"));\n  }\n}\n\nexport let ChatCreateNewComponent = /*#__PURE__*/(() => {\n  class ChatCreateNewComponent {\n    constructor(dialogRef, chatService, snackbar) {\n      this.dialogRef = dialogRef;\n      this.chatService = chatService;\n      this.snackbar = snackbar;\n      this.hide = true;\n      this.name = new FormControl('');\n      this.description = new FormControl(null);\n      this.type = ChatType.PUBLIC;\n      this.required = true;\n      this.password = new FormControl('');\n    }\n\n    ngOnInit() {}\n\n    getPasswordError() {\n      return this.password.getError('validation');\n    }\n\n    getNameError() {\n      return this.name.getError('validation');\n    }\n\n    getDescriptionError() {\n      return this.description.getError('validation');\n    }\n\n    closeDialog() {\n      this.dialogRef.close(null);\n    }\n\n    onSubmit() {\n      if (this.type != ChatType.PROTECTED) {\n        this.password.setValue(null);\n      }\n\n      this.chatService.createChat({\n        type: this.type,\n        password: this.password.value == null || this.password.value.length == 0 ? null : this.password.value,\n        name: this.name.value,\n        description: this.description.value\n      }).subscribe(chat => {\n        this.dialogRef.close();\n      }, error => {\n        if (error.status == 400\n        /* BadRequest */\n        && error.error != null) {\n          const messages = ErrorUtil.toMessages(error.error.message);\n          messages.forEach(message => {\n            if (message.toLowerCase().includes(\"пароль\")) {\n              this.password.setErrors({\n                'validation': message\n              });\n            } else if (message.toLowerCase().includes(\"название\")) {\n              this.name.setErrors({\n                'validation': message\n              });\n            } else if (message.toLowerCase().includes(\"описание\")) {\n              this.description.setErrors({\n                'validation': message\n              });\n            } else {\n              throw new HttpErrorResponse(error);\n            }\n          });\n        } else {\n          throw new HttpErrorResponse(error);\n        }\n      });\n    }\n\n  }\n\n  ChatCreateNewComponent.ɵfac = function ChatCreateNewComponent_Factory(t) {\n    return new (t || ChatCreateNewComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.ChatService), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n  };\n\n  ChatCreateNewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChatCreateNewComponent,\n    selectors: [[\"app-chat-create-new\"]],\n    decls: 34,\n    vars: 10,\n    consts: [[2, \"text-align\", \"center\", \"margin\", \"0 0 15px\", \"font-size\", \"12pt\", \"font-weight\", \"500\"], [2, \"width\", \"calc(100% - 20px)\", \"height\", \"calc(100% - 20px - 68px)\", \"overflow-y\", \"auto\", \"scrollbar-width\", \"thin\", \"padding-right\", \"10px\", \"padding-left\", \"10px\"], [2, \"text-align\", \"center\", \"margin\", \"0 0 10px\", \"font-size\", \"11pt\", \"font-weight\", \"500\"], [\"appearance\", \"fill\", 2, \"width\", \"100%\"], [\"matInput\", \"\", \"autocomplete\", \"off\", \"required\", \"\", 3, \"formControl\"], [4, \"ngIf\"], [\"appearance\", \"fill\", 2, \"width\", \"100%\", \"margin-top\", \"10px\"], [\"matInput\", \"\", 2, \"height\", \"auto\", 3, \"formControl\"], [2, \"text-align\", \"center\", \"margin\", \"10px 0 10px\", \"font-size\", \"11pt\", \"font-weight\", \"500\"], [\"color\", \"primary\", \"aria-label\", \"Select chat access type\", 2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"width\", \"100%\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"PUBLIC\"], [\"value\", \"PROTECTED\"], [\"value\", \"PRIVATE\"], [2, \"width\", \"100%\", \"color\", \"#5b5b5b\", \"margin-bottom\", \"15px\", 3, \"ngSwitch\"], [\"class\", \"access-type-description\", 4, \"ngSwitchCase\"], [\"style\", \"width: 100%\", 4, \"ngIf\"], [\"mat-dialog-actions\", \"\", 2, \"width\", \"100%\", \"display\", \"flex\", \"justify-content\", \"space-around\"], [\"mat-button\", \"\", 3, \"click\"], [\"mat-button\", \"\", \"type\", \"submit\", \"value\", \"submit\", \"cdkFocusInitial\", \"\", 3, \"click\"], [1, \"access-type-description\"], [2, \"width\", \"100%\"], [\"autocomplete\", \"off\", \"matInput\", \"\", 3, \"type\", \"formControl\", \"required\"], [\"mat-icon-button\", \"\", \"matSuffix\", \"\", 3, \"click\"]],\n    template: function ChatCreateNewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\", 0);\n        i0.ɵɵtext(1, \" Create new chat\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"p\", 2);\n        i0.ɵɵtext(4, \" Main info \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"mat-form-field\", 3);\n        i0.ɵɵelementStart(6, \"mat-label\");\n        i0.ɵɵtext(7, \"Enter name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"input\", 4);\n        i0.ɵɵtemplate(9, ChatCreateNewComponent_mat_error_9_Template, 2, 1, \"mat-error\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"mat-form-field\", 6);\n        i0.ɵɵelementStart(11, \"mat-label\");\n        i0.ɵɵtext(12, \"Enter description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"textarea\", 7);\n        i0.ɵɵtemplate(14, ChatCreateNewComponent_mat_error_14_Template, 2, 1, \"mat-error\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\", 8);\n        i0.ɵɵtext(16, \" Access info \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-radio-group\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function ChatCreateNewComponent_Template_mat_radio_group_ngModelChange_17_listener($event) {\n          return ctx.type = $event;\n        });\n        i0.ɵɵelementStart(18, \"mat-radio-button\", 10);\n        i0.ɵɵtext(19, \"PUBLIC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"mat-radio-button\", 11);\n        i0.ɵɵtext(21, \"PROTECTED\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"mat-radio-button\", 12);\n        i0.ɵɵtext(23, \"PRIVATE\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 13);\n        i0.ɵɵtemplate(25, ChatCreateNewComponent_ul_25_Template, 7, 0, \"ul\", 14);\n        i0.ɵɵtemplate(26, ChatCreateNewComponent_ul_26_Template, 7, 0, \"ul\", 14);\n        i0.ɵɵtemplate(27, ChatCreateNewComponent_ul_27_Template, 7, 0, \"ul\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(28, ChatCreateNewComponent_div_28_Template, 9, 7, \"div\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 16);\n        i0.ɵɵelementStart(30, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function ChatCreateNewComponent_Template_button_click_30_listener() {\n          return ctx.closeDialog();\n        });\n        i0.ɵɵtext(31, \"Close\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function ChatCreateNewComponent_Template_button_click_32_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(33, \"Create\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formControl\", ctx.name);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.name.hasError(\"validation\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formControl\", ctx.description);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.description.hasError(\"validation\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.type);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngSwitch\", ctx.type);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"PUBLIC\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"PROTECTED\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", \"PRIVATE\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.type == \"PROTECTED\");\n      }\n    },\n    directives: [i4.MatFormField, i4.MatLabel, i5.MatInput, i6.DefaultValueAccessor, i6.RequiredValidator, i6.NgControlStatus, i6.FormControlDirective, i7.NgIf, i4.MatError, i8.MatRadioGroup, i6.NgModel, i8.MatRadioButton, i7.NgSwitch, i7.NgSwitchCase, i9.MatButton, i4.MatSuffix, i10.MatIcon, i1.MatDialogActions],\n    styles: [\".access-type-description[_ngcontent-%COMP%]{padding:0;list-style-position:inside}\"]\n  });\n  return ChatCreateNewComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}